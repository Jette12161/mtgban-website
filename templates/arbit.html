<!DOCTYPE html>
<html>
<head>
    <link href='https://fonts.googleapis.com/css?family=Rosario:400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <title>{{.Title}}</title>
</head>
<body>

<nav>
    <ul>
        {{range .Nav}}
            <li><a {{if .Active}}class="{{.Class}}"{{end}} href="{{.Link}}">{{.Name}}</a></li>
        {{end}}
        {{if eq .SellerShort "CK"}}
            <li>
                <form class="search" target="_blank" action="https://www.cardkingdom.com/catalog/search?utm_source={{.CKPartner}}&utm_medium=affiliate&utm_campaign={{.CKPartner}}">
                    <input type="hidden" id="partner" name="partner" value="{{.CKPartner}}">
                    <input class="w3-input w3-border-0 w3-round-small w3-animate-input" style="width:30%" type="text" name="filter[name]" placeholder="Search CK..." value="">
                </form>
            </li>
        {{end}}
    </ul>
</nav>

<a name="top">&nbsp;</a>
<div class="mainbody">
    {{if ne .ErrorMessage ""}}
        <h1>{{.ErrorMessage}}</h1>
    {{else if eq .SellerShort ""}}
        <h1>Welcome to Arbitrage</h1>
        <div class="indent">
            <p>Please use the top bar to choose the seller to buy from.</p>
            <h2>Instructions</h2>
            <ul class="indent">
                <li>Data is refreshed periodically over the day.</li>
                <li>There is a minimum 10% spread and $0.2 difference for a card to be considered arbitrage.</li>
                <li>Always check validity of prices before committing anything, it is possible that prices or quantities changed.</li>
                <li>By default, arbitrage is computed on cash value, taking into account for condition whenever possible.</li>
                <li>Each seller page will contain a list of vendors, with a brief summary at the top containing the number of arbitrage opportunities.</li>
                <li>In case of mistakes or incongruities, please notify the devs in the BAN Discord.</li>
                <li>Should you find this content useful, consider clicking on one of the provided links to make a purchase on the website, and directly support BAN.</li>
            </ul>
        </div>
    {{else}}
        <h1>Arbitrage from {{.SellerFull}}</h1>
        <div class="indent">
            <h2><p>{{.InfoMessage}}</p></h2>
            <div class="indent">
                <p>
                Jump to
                {{range .Arb}}
                    <a class="btn normal" href="#{{.Name}}">{{.Name}} ({{.Len}})</a>
                {{end}}
                </p>
            </div>
            {{range .Arb}}
                <div class="sticky" style="top: 48px; background-color: #f8f8f8; z-index: 1;">
                    <h3><a name="{{.Name}}">{{.Name}}</a></h3>
                    <hr width=20%>
                </div>
                <table>
                    <tr>
                        <th class="stickyHeaderTiny">Card Name</th>
                        <th class="stickyHeaderTiny">Edition</th>
                        <th class="stickyHeaderTiny"><center>#</center></th>
                        <th class="stickyHeaderTiny">F/NF</th>
                        <th class="stickyHeaderTiny">Conditions</th>
                        <th class="stickyHeaderTiny">Sell Price</th>
                        <th class="stickyHeaderTiny">Buy Price</th>
                        <th class="stickyHeaderTiny">Trade Price</th>
                        <th class="stickyHeaderTiny">Difference</th>
                        <th class="stickyHeaderTiny">Spread</th>
                        <th class="stickyHeaderTiny">Price Ratio</th>
                        <th class="stickyHeaderTiny"><center>Quicklinks</center></th>
                    </tr>
                    {{range .Arbit}}
                        <tr>
                            <td>
                                {{.Card.Name}}
                            </td>
                            <td>
                                {{.Card.Edition}}
                            </td>
                            <td>
                                {{.Card.Number}}
                            </td>
                            <td>
                                {{if .Card.Foil}}FOIL{{end}}
                            </td>
                            <td>
                                <center>{{.InventoryEntry.Conditions}}</center>
                            </td>
                            <td>
                                $ {{.InventoryEntry.Price}}
                            </td>
                            <td>
                                $ {{.BuylistEntry.BuyPrice}}
                            </td>
                            <td>
                                $ {{printf "%.2f" .BuylistEntry.TradePrice}}
                            </td>
                            <td>
                                $ {{printf "%.2f" .Difference}}
                            </td>
                            <td>
                                {{printf "%.2f" .Spread}} %
                            </td>
                            <td>
                                <center>
                                {{printf "%.2f" .BuylistEntry.PriceRatio}} %
                                </center>
                            </td>
                            <td>
                                <center>
                                    {{if ne .InventoryEntry.URL ""}}
                                        <a class="btn normal" href="{{.InventoryEntry.URL}}" target="_blank">Buy</a>
                                    {{end}}
                                    {{if ne .BuylistEntry.URL ""}}
                                        <a class="btn normal" href="{{.BuylistEntry.URL}}" target="_blank">Sell</a>
                                    {{end}}
                                </center>
                            </td>
                        </tr>
                    {{end}}
                    <tr style="background-color: #f8f8f8;">
                        <td colspan=12>
                            <p style="float: left;">
                                <i>Last update: {{.LastUpdate}}</i>
                            </p>

                            <a class="btn default" style="float: right;" href="#top">back to top</a>
                            {{if eq .Name "ABU Games"}}
                                {{if $.UseCredit}}
                                    <a class="btn success" style="float: right;" href="arbit?source={{$.SellerShort}}&Signature={{$.Signature}}&Expires={{$.Expires}}">Return to Cash Arbitrage</a>
                                {{else}}
                                    <a class="btn warning" style="float: right;" href="arbit?source={{$.SellerShort}}&credit=true&Signature={{$.Signature}}&Expires={{$.Expires}}">Check Credit Arbitrage</a>
                                {{end}}
                            {{end}}
                        </td>
                    </tr>
                </table>
                <br>
            {{end}}
        </div>
        <br>
        <p>
            <i>Last update: {{.SellerUpdate}}</i><br>
            {{if eq .SellerShort "CK"}}
            By visiting Card Kingdom through the links on this page you're supporting the continuos development of this site â™¥
            {{end}}
        </p>
        <br>
    {{end}}
</div>
</body>
</html>
